<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store | Finest Steel Nigeria</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation (copy from index.html) -->
   <nav id="navbar">
        <div class="nav-container">
            <a href="#" class="logo" style="display: flex; align-items: center; gap: 10px;">
                <img src="indigo.jpg" alt="logo" height="50" width="50" style="border-radius: 50%;">
                Finest Steel & Accessories
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li class="nav-item has-dropdown">
                    <a href="#" class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">Products ‚ñæ</a>
                    <ul class="dropdown-menu" aria-label="Products submenu">
                       <li><a href="gallery-materials.html" onclick="closeMobileMenu()">Wrought Iron Materials</a></li>
                        <li><a href="gallery-designs.html" onclick="closeMobileMenu()">Wrought Iron Catalogue</a></li>
                        <li><a href="gallery-gates.html" onclick="closeMobileMenu()">Wrought Iron Gates</a></li>
                        <li><a href="gallery-staircases.html" onclick="closeMobileMenu()">Wrought Iron Railing Designs</a></li>
                            <li><a href="gallery-railings.html" onclick="closeMobileMenu()">Wrought Iron Fence & Protector Designs</a></li>
                            <li><a href="gallery-laserplates.html" onclick="closeMobileMenu()">Laserplates Design</a></li>
                        <li><a href="gallery-construction.html" onclick="closeMobileMenu()">Iron for Construction / Reinforcement</a></li>
                        <li><a href="gallery-welding.html" onclick="closeMobileMenu()">Welding & Accessories</a></li>
                            <li><a href="gallery-stainlessrailings.html" onclick="closeMobileMenu()">Stainless Railings Designs</a></li>
                        <li><a href="gallery-steel.html" onclick="closeMobileMenu()">Stainless Steel</a></li>
                    </ul>
                </li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="store.html">Store</a></li>
                <li><a href="#testimonials">Reviews</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div style="display: flex; align-items: center;">
                <!-- Removed cart-icon -->
                <div class="mobile-menu-toggle" id="hamburgerBtn">
                    <div class="hamburger"></div>
                    <div class="hamburger"></div>
                    <div class="hamburger"></div>
                </div>
            </div>
        </div>
        <div class="mobile-menu" id="mobileMenu">
            <ul>
                <li><a href="index.html" onclick="closeMobileMenu()">Home</a></li>
                <li class="mobile-submenu">
                    <button class="mobile-submenu-toggle" aria-expanded="false">Products ‚ñæ</button>
                    <ul class="mobile-submenu-list">
                        <li><a href="wroughtiron.html" onclick="closeMobileMenu()">Wrought Iron Materials</a></li>
                        <li><a href="wroughtiron-designs.html" onclick="closeMobileMenu()">Wrought Iron Catalogue</a></li>
                        <li><a href="gallery-gates.html" onclick="closeMobileMenu()">Wrought Iron Gates</a></li>
                        <li><a href="gallery-railings.html" onclick="closeMobileMenu()">Wrought Iron Railing Designs</a></li>
                        <li><a href="wroughtiron.html" onclick="closeMobileMenu()">Wrought Iron Fence & Protector Designs</a></li>
                        <li><a href="gallery-laserplates.html" onclick="closeMobileMenu()">Laserplates Design</a></li>
                        <li><a href="gallery-stainlessrailings.html" onclick="closeMobileMenu()">Stainless Railings Designs</a></li>
                        <li><a href="ironforconstruction.html" onclick="closeMobileMenu()">Iron for Construction / Reinforcement</a></li>
                        <li><a href="weldingaccesories.html" onclick="closeMobileMenu()">Welding & Accessories</a></li>
                         <li><a href="gallery-stainlessrailings.html" onclick="closeMobileMenu()">Stainless Railings Designs</a></li>
                        <li><a href="gallery-steel.html" onclick="closeMobileMenu()">Stainless Steel</a></li>
                    </ul>
                </li>
                <li><a href="gallery.html" onclick="closeMobileMenu()">Gallery</a></li>
                <li><a href="store.html" onclick="closeMobileMenu()">Store</a></li>
                <li><a href="#testimonials" onclick="closeMobileMenu()">Reviews</a></li>
                <li><a href="#contact" onclick="closeMobileMenu()">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Store Section -->
    <section id="store" class="store" style="margin-top:100px;">
        <div class="container">
            <h2 class="section-title animate-on-scroll">Online Store</h2>
            <p class="section-subtitle animate-on-scroll">Shop premium construction materials with fast delivery</p>
            <div class="store-filters animate-on-scroll">
                <button class="filter-btn active" data-filter="all">All Products</button>
                <button class="filter-btn" data-filter="iron">Iron & Steel</button>
                <button class="filter-btn" data-filter="welding">Welding</button>
                <button class="filter-btn" data-filter="tools">Tools & Accessories</button>
            </div>
            <div id="storeGrid" class="store-grid">
                <!-- Products will be rendered here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="cart-close" onclick="toggleCart()">√ó</button>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-total">
            <span>Total:</span>
            <span id="cartTotal">‚Ç¶0</span>
        </div>
        <div class="cart-account-info" style="margin-bottom: 1em; text-align: center;">
            <strong>Please Pay into: 0767734442 - Ezeobiora Ifeoma Blessing - Access Bank</strong>
        </div>
        <button class="checkout-btn" onclick="checkout()">Checkout</button>
    </div>
    <!-- Floating Cart Button -->
    <button class="cart-fab" id="cartFab" onclick="toggleCart()">
        üõí <span id="cartCount">0</span>
    </button>

    <!-- Added to cart message -->
    <div id="cart-message" style="display:none;position:fixed;top:30px;left:50%;transform:translateX(-50%); background: linear-gradient(45deg, var(--accent), var(--gold));color:#fff;padding:1em 2em;border-radius:8px;z-index:3000;font-weight:bold;box-shadow:0 2px 12px rgba(0,0,0,0.08);">
        Added to cart!
    </div>

    <!-- Footer (copy from index.html) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Finest Steel Nigeria</h3>
                    <p>Your trusted partner for premium construction materials and steel fabrication services. Building Nigeria's future with quality, precision, and excellence.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <p><a href="index.html#home">Home</a></p>
                    <p><a href="index.html#services">Services</a></p>
                    <p><a href="index.html#products">Products</a></p>
                    <p><a href="index.html#testimonials">Testimonials</a></p>
                    <p><a href="index.html#contact">Contact</a></p>
                </div>
                <div class="footer-section">
                    <h3>Our Services</h3>
                    <p><a href="index.html#services">Residential Construction</a></p>
                    <p><a href="index.html#services">Commercial Projects</a></p>
                    <p><a href="index.html#services">Steel Fabrication</a></p>
                    <p><a href="index.html#services">Custom Gates</a></p>
                    <p><a href="index.html#services">Welding Accessories</a></p>
                </div>
                <div class="footer-section">
                    <h3>Contact Info</h3>
                    <p>üìû 08141298704</p>
                    <p>üìß FinestSteelng@gmail.com</p>
                    <p>üìç 153 Lagos-Abeokuta Expressway<br>Iyana-Ipaja, Lagos</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Finest Steel Nigeria. All rights reserved. | Premium Construction Materials & Steel Fabrication</p>
            </div>
        </div>
    </footer>
<a class="wa-cta" href="https://wa.me/2348141298704?text=Hello%20Finest%20Steel%20Nigeria!%20I%20would%20like%20to%20make%20an%20inquiry%20on%20wrought-iron-railings." target="_blank" rel="noopener" title="Chat with us on WhatsApp">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    <span class="wa-label">Chat on WhatsApp</span>
  </a>

    <script>
const API_URL = "https://kanezbackend-3.onrender.com/api/products";
// Cart logic
let cart = [];

function updateCartDisplay() {
    const cartSidebar = document.getElementById('cartSidebar');
    const cartItemsDiv = document.getElementById('cartItems');
    const cartCount = document.getElementById('cartCount');
    const cartTotal = document.getElementById('cartTotal');
    let total = 0;
    cartItemsDiv.innerHTML = '';
    if (cart.length === 0) {
        cartItemsDiv.innerHTML = '<p style="text-align:center;color:#888;">Your cart is empty.</p>';
    } else {
        cart.forEach((item, idx) => {
            total += item.price * item.qty;
            cartItemsDiv.innerHTML += `
                <div class="cart-item">
                    <img src="${item.img}" alt="${item.title}">
                    <span class="cart-item-title">${item.title}</span>
                    <button onclick="changeQty(${idx}, -1)">-</button>
                    <span class="cart-item-qty">${item.qty}</span>
                    <button onclick="changeQty(${idx}, 1)">+</button>
                    <button class="cart-item-remove" onclick="removeFromCart(${idx})">&times;</button>
                </div>
            `;
        });
    }
    cartCount.textContent = cart.reduce((sum, item) => sum + item.qty, 0);
    cartTotal.textContent = '‚Ç¶' + total.toLocaleString();
}

function addToCart(title, price, img) {
    const idx = cart.findIndex(item => item.title === title);
    if (idx > -1) {
        cart[idx].qty += 1;
    } else {
        cart.push({ title, price, img, qty: 1 });
    }
    updateCartDisplay();
    showCartMessage();
}

function changeQty(idx, delta) {
    cart[idx].qty += delta;
    if (cart[idx].qty <= 0) cart.splice(idx, 1);
    updateCartDisplay();
}

function removeFromCart(idx) {
    cart.splice(idx, 1);
    updateCartDisplay();
}

function toggleCart() {
    document.getElementById('cartSidebar').classList.toggle('active');
}

function checkout() {
    if (cart.length === 0) {
        alert('Your cart is empty!');
        return;
    }
    let message = 'I have paid for the following products from Finest Steel Nigeria:%0A';
    cart.forEach(item => {
        message += `${item.title} x${item.qty} - ‚Ç¶${(item.price * item.qty).toLocaleString()}%0A`;
    });
    let total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
    message += `Total: ‚Ç¶${total.toLocaleString()}%0A`;
    message += 'Paid into: 0767734442 - Ezeobiora Ifeoma Blessing - Access Bank';
    window.open(`https://wa.me/2348141298704?text=${message}`, '_blank');
}

function showCartMessage() {
    const msg = document.getElementById('cart-message');
    msg.style.display = 'block';
    setTimeout(() => {
        msg.style.display = 'none';
    }, 1200);
}

// --- Product Rendering ---
async function getProducts() {
    try {
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error("Network response was not ok");
        return await res.json();
    } catch (err) {
        document.getElementById("storeGrid").innerHTML = "<p style='color:red;'>Error loading products.</p>";
        console.error(err);
        return [];
    }
}

async function renderStoreProducts(filter = "all") {
    const grid = document.getElementById("storeGrid");
    grid.innerHTML = "<p>Loading...</p>";
    const products = await getProducts();
    grid.innerHTML = "";
    products.forEach(product => {
        if (filter === "all" || product.category === filter) {
            const card = document.createElement("div");
            card.className = "product-card animate-on-scroll";
            card.setAttribute("data-category", product.category);
            card.innerHTML = `
                <img src="${product.img}" alt="${product.title}" class="product-img">
                <h3 class="product-title">${product.title}</h3>
                <p class="product-description">${product.description}</p>
                <div class="product-price">‚Ç¶${product.price.toLocaleString()}</div>
                <button class="add-to-cart-btn" data-title="${product.title}" data-price="${product.price}" data-img="${product.img}">Add to Cart</button>
            `;
            // Add cart event
            card.querySelector('.add-to-cart-btn').addEventListener('click', function(e) {
                e.stopPropagation();
                addToCart(
                    product.title,
                    product.price,
                    product.img
                );
            });
            // Make card clickable
            card.addEventListener('click', function(e) {
                if (e.target.classList.contains('add-to-cart-btn')) return;
                addToCart(
                    product.title,
                    product.price,
                    product.img
                );
            });
            grid.appendChild(card);
        }
    });
    // Animate on scroll
    animateOnScroll();
}

// --- Product Filtering ---
document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        const filter = this.getAttribute('data-filter');
        renderStoreProducts(filter);
    });
});

// Hamburger menu functionality
const hamburgerBtn = document.getElementById('hamburgerBtn');
const mobileMenu = document.getElementById('mobileMenu');
hamburgerBtn.addEventListener('click', function() {
    hamburgerBtn.classList.toggle('active');
    mobileMenu.classList.toggle('active');
});
function closeMobileMenu() {
    mobileMenu.classList.remove('active');
    hamburgerBtn.classList.remove('active');
}

// Animate elements on scroll
function animateOnScroll() {
    const elements = document.querySelectorAll('.animate-on-scroll');
    const windowHeight = window.innerHeight;
    elements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementVisible = 150;
        if (elementTop < windowHeight - elementVisible) {
            element.classList.add('animated');
        }
    });
}
window.addEventListener('scroll', animateOnScroll);
window.addEventListener('load', animateOnScroll);

// Initialize
updateCartDisplay();
renderStoreProducts();

         document.querySelectorAll('.mobile-submenu-toggle').forEach(btn => {
            btn.addEventListener('click', function (e) {
                const parent = btn.closest('.mobile-submenu');
                if (!parent) return;
                const expanded = btn.getAttribute('aria-expanded') === 'true';
                btn.setAttribute('aria-expanded', String(!expanded));
                parent.classList.toggle('open', !expanded);
            });
        });
    </script>
</body>

</html>







